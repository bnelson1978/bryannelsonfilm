---
import { getCollection } from "astro:content";

const CATEGORY_ORDER = [
  "Human Interest",
  "Space & Astronomy",
  "Health Sciences",
  "Arts & Culture",
  "Nature & Environment",
  "Education",
  "Innovation & Technology",
  "New Frontiers",
];

const films = await getCollection("films");

const featured = films.find((f) => f.data.featured);

const homeFilms = films
  .filter((f) => f.data.home)
  .sort((a, b) => (b.data.year ?? 0) - (a.data.year ?? 0));

function isMurrow(text) {
  return typeof text === "string" && text.toLowerCase().includes("murrow");
}
function awardColor(text) {
  return isMurrow(text) ? "#4aa3ff" : "#ffd700";
}
function getAwards(film) {
  if (Array.isArray(film.data.awards) && film.data.awards.length) return film.data.awards;
  if (typeof film.data.award === "string" && film.data.award.trim()) return [film.data.award.trim()];
  return [];
}

function byHomeSection(tag) {
  return films
    .filter((f) => Array.isArray(f.data.homeSections) && f.data.homeSections.includes(tag))
    .sort((a, b) => {
      const ao = a.data.homeSectionOrder?.[tag] ?? 999999;
      const bo = b.data.homeSectionOrder?.[tag] ?? 999999;
      if (ao !== bo) return ao - bo;

      const ay = a.data.year ?? 0;
      const by = b.data.year ?? 0;
      if (ay !== by) return by - ay;

      return a.data.title.localeCompare(b.data.title);
    });
}

const osiris = byHomeSection("osiris-rex");
const fredFox = byHomeSection("fred-fox");
const newFrontiers = byHomeSection("new-frontiers");
const independentOriginals = byHomeSection("independent-originals");

const FEATURED_BLURB =
  "Anesthesiologist Stuart Hameroff explores a bold theory of consciousness tied to life‚Äôs origins ‚Äî and teams up with NASA scientist Dante Lauretta to look for evidence in ancient asteroid samples.";
---

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width" />
    <title>Bryan Nelson ‚Äî Documentary Filmmaker</title>

    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Manrope:wght@500;600;700&family=Source+Sans+3:wght@350;400;500;600&display=swap"
      rel="stylesheet"
    />
    <meta name="color-scheme" content="dark" />
  </head>

  <body>
    <div class="bg">
      <div class="vignette"></div>
      <div class="grain"></div>
    </div>

    <main class="wrap">
      <header class="heroTop">
        <div class="heroLeft">
          <h1 class="heroName">Bryan Nelson</h1>
          <p class="sub">Documentary filmmaker ‚Ä¢ Founder, Catachresis Productions</p>
        </div>

        <nav class="actions" aria-label="Primary navigation">
          <a href="/about" class="btn primary">About</a>
          <a href="/categories" class="btn ghost">Browse Films</a>
          <a href="/contact" class="btn ghost">Contact</a>
        </nav>
      </header>

      {/* Featured */}
      <section class="sectionBlock">
        <div class="sectionHead">
          <h2 class="sectionTitle sectionTitleLarge">Featured Film</h2>
        </div>

        {featured ? (
          <a class="featuredCard cardHover" href={`/films/${featured.slug}`}>
            <div class="featuredImg thumb">
              <img src={featured.data.thumbnail} alt={featured.data.title} />
              <div class="featuredOverlay">
                <span class="badge">Featured</span>
              </div>
            </div>

            <div class="featuredMeta">
              <div class="featuredKicker">
                <span>{featured.data.categories[0]}</span>
                {featured.data.year ? <span> ‚Ä¢ {featured.data.year}</span> : null}
              </div>

              <h3 class="featuredTitle">{featured.data.title}</h3>

              {getAwards(featured).length ? (
                <div class="awardsStack">
                  {getAwards(featured).map((a) => (
                    <div style={`color:${awardColor(a)}; font-weight:600;`}>
                      üèÜ {a}
                    </div>
                  ))}
                </div>
              ) : null}

              {featured.data.logline ? <p class="featuredLogline">{featured.data.logline}</p> : null}

              <div class="ctaRow">
                <span class="watchBtn">Watch</span>
              </div>

              <p class="featuredBlurb">{FEATURED_BLURB}</p>
            </div>
          </a>
        ) : (
          <p class="muted">No featured film set yet.</p>
        )}
      </section>

      <hr class="sectionDivider" />

      {/* Selected Films (plain grid, no Show More/Less) */}
      <section class="sectionBlock">
        <div class="sectionHead split">
          <h2 class="sectionTitle sectionTitleLarge">Selected Films</h2>
          <a class="seeAll" href="/categories">See all</a>
        </div>

        <section class="grid">
          {homeFilms.map((film) => (
            <a class="card cardHover" href={`/films/${film.slug}`}>
              <div class="thumb">
                <img src={film.data.thumbnail} alt={film.data.title} loading="lazy" />
              </div>

              <div class="meta">
                <div class="title">{film.data.title}</div>

                <div class="kicker">
                  <span>{film.data.categories[0]}</span>
                  {film.data.year ? <span> ‚Ä¢ {film.data.year}</span> : null}
                </div>

                {getAwards(film).length ? (
                  <div class="awardsStack">
                    {getAwards(film).map((a) => (
                      <div style={`color:${awardColor(a)}; font-weight:600;`}>
                        üèÜ {a}
                      </div>
                    ))}
                  </div>
                ) : null}
              </div>
            </a>
          ))}
        </section>
      </section>

      <hr class="sectionDivider" />

      {/* OSIRIS */}
      <section class="sectionBlock">
        <div class="sectionHead split">
          <div>
            <h2 class="sectionTitle">NASA's OSIRIS-REx Mission Coverage</h2>
            <div class="mutedSmall">Documentaries highlighting all the major milestones</div>
          </div>
          <span class="scrollHint">‚Üê scroll ‚Üí</span>
        </div>

        <div class="rowWrap" data-rowwrap>
          <button class="rowArrow left" type="button" aria-label="Scroll left" data-arrow="left">‚Äπ</button>
          <button class="rowArrow right" type="button" aria-label="Scroll right" data-arrow="right">‚Ä∫</button>

          <div class="edgeGlow left" data-glow="left"></div>
          <div class="edgeGlow right" data-glow="right"></div>

          <div class="rowPad">
            <div class="rowStrip" data-rowstrip>
              {osiris.map((film) => (
                <a class="card rowCard cardHover" href={`/films/${film.slug}`}>
                  <div class="thumb">
                    <img src={film.data.thumbnail} alt={film.data.title} loading="lazy" />
                  </div>

                  <div class="meta">
                    <div class="title">{film.data.title}</div>

                    <div class="kicker">
                      <span>{film.data.categories[0]}</span>
                      {film.data.year ? <span> ‚Ä¢ {film.data.year}</span> : null}
                    </div>

                    {getAwards(film).length ? (
                      <div class="awardsStack">
                        {getAwards(film).map((a) => (
                          <div style={`color:${awardColor(a)}; font-weight:600;`}>
                            üèÜ {a}
                          </div>
                        ))}
                      </div>
                    ) : null}
                  </div>
                </a>
              ))}
            </div>
          </div>
        </div>
      </section>

      <hr class="sectionDivider" />

      {/* Fred Fox */}
      <section class="sectionBlock">
        <div class="sectionHead split">
          <div>
            <h2 class="sectionTitle">Fred Fox School of Music Series</h2>
            <div class="mutedSmall">Performances and artist profiles ‚Äî scroll for more</div>
          </div>
          <span class="scrollHint">‚Üê scroll ‚Üí</span>
        </div>

        <div class="rowWrap" data-rowwrap>
          <button class="rowArrow left" type="button" aria-label="Scroll left" data-arrow="left">‚Äπ</button>
          <button class="rowArrow right" type="button" aria-label="Scroll right" data-arrow="right">‚Ä∫</button>

          <div class="edgeGlow left" data-glow="left"></div>
          <div class="edgeGlow right" data-glow="right"></div>

          <div class="rowPad">
            <div class="rowStrip" data-rowstrip>
              {fredFox.map((film) => (
                <a class="card rowCard cardHover" href={`/films/${film.slug}`}>
                  <div class="thumb">
                    <img src={film.data.thumbnail} alt={film.data.title} loading="lazy" />
                  </div>

                  <div class="meta">
                    <div class="title">{film.data.title}</div>

                    <div class="kicker">
                      <span>{film.data.categories[0]}</span>
                      {film.data.year ? <span> ‚Ä¢ {film.data.year}</span> : null}
                    </div>

                    {getAwards(film).length ? (
                      <div class="awardsStack">
                        {getAwards(film).map((a) => (
                          <div style={`color:${awardColor(a)}; font-weight:600;`}>
                            üèÜ {a}
                          </div>
                        ))}
                      </div>
                    ) : null}
                  </div>
                </a>
              ))}
            </div>
          </div>
        </div>
      </section>

      <hr class="sectionDivider" />

      {/* New Frontiers */}
      <section class="sectionBlock">
        <div class="sectionHead split">
          <div>
            <h2 class="sectionTitle">New Frontiers: Full Episodes</h2>
            <div class="mutedSmall">Magazine program I produced featuring University of Arizona stories</div>
          </div>
          <span class="scrollHint">‚Üê scroll ‚Üí</span>
        </div>

        <div class="rowWrap" data-rowwrap>
          <button class="rowArrow left" type="button" aria-label="Scroll left" data-arrow="left">‚Äπ</button>
          <button class="rowArrow right" type="button" aria-label="Scroll right" data-arrow="right">‚Ä∫</button>

          <div class="edgeGlow left" data-glow="left"></div>
          <div class="edgeGlow right" data-glow="right"></div>

          <div class="rowPad">
            <div class="rowStrip" data-rowstrip>
              {newFrontiers.map((film) => (
                <a class="card rowCard cardHover" href={`/films/${film.slug}`}>
                  <div class="thumb">
                    <img src={film.data.thumbnail} alt={film.data.title} loading="lazy" />
                  </div>

                  <div class="meta">
                    <div class="title">{film.data.title}</div>

                    <div class="kicker">
                      <span>{film.data.categories[0]}</span>
                      {film.data.year ? <span> ‚Ä¢ {film.data.year}</span> : null}
                    </div>

                    {getAwards(film).length ? (
                      <div class="awardsStack">
                        {getAwards(film).map((a) => (
                          <div style={`color:${awardColor(a)}; font-weight:600;`}>
                            üèÜ {a}
                          </div>
                        ))}
                      </div>
                    ) : null}
                  </div>
                </a>
              ))}
            </div>
          </div>
        </div>
      </section>

      <hr class="sectionDivider" />

      {/* Independent Originals */}
      <section class="sectionBlock">
        <div class="sectionHead split">
          <div>
            <h2 class="sectionTitle">Independent Originals</h2>
            <div class="mutedSmall">Personal projects and self-produced work</div>
          </div>
          <span class="scrollHint">‚Üê scroll ‚Üí</span>
        </div>

        <div class="rowWrap" data-rowwrap>
          <button class="rowArrow left" type="button" aria-label="Scroll left" data-arrow="left">‚Äπ</button>
          <button class="rowArrow right" type="button" aria-label="Scroll right" data-arrow="right">‚Ä∫</button>

          <div class="edgeGlow left" data-glow="left"></div>
          <div class="edgeGlow right" data-glow="right"></div>

          <div class="rowPad">
            <div class="rowStrip" data-rowstrip>
              {independentOriginals.map((film) => (
                <a class="card rowCard cardHover" href={`/films/${film.slug}`}>
                  <div class="thumb">
                    <img src={film.data.thumbnail} alt={film.data.title} loading="lazy" />
                  </div>

                  <div class="meta">
                    <div class="title">{film.data.title}</div>

                    <div class="kicker">
                      <span>{film.data.categories[0]}</span>
                      {film.data.year ? <span> ‚Ä¢ {film.data.year}</span> : null}
                    </div>

                    {getAwards(film).length ? (
                      <div class="awardsStack">
                        {getAwards(film).map((a) => (
                          <div style={`color:${awardColor(a)}; font-weight:600;`}>
                            üèÜ {a}
                          </div>
                        ))}
                      </div>
                    ) : null}
                  </div>
                </a>
              ))}
            </div>
          </div>
        </div>
      </section>

      <hr class="sectionDivider" />

      {/* Browse categories at end */}
      <section class="sectionBlock">
        <div class="sectionHead split">
          <div>
            <h2 class="sectionTitle">Browse Films by Category</h2>
            <div class="mutedSmall">Jump to a category page</div>
          </div>
          <a class="seeAll" href="/categories">Browse all</a>
        </div>

        <div class="catRow">
          {CATEGORY_ORDER.map((c) => (
            <a class="catPill" href={`/categories/${encodeURIComponent(c)}`}>
              <span class="pillDot"></span>
              {c}
            </a>
          ))}
        </div>
      </section>

      <footer class="footer">
        <div class="footerLine"></div>
        <div class="footerInner">
          <div class="footerLeft">
            <div class="footerName">Bryan Nelson</div>
            <div class="footerSub">Founder, Catachresis Productions</div>
          </div>
          <div class="footerRight">
            <a href="/about" class="footerLink">About</a>
            <a href="/categories" class="footerLink">Browse Films</a>
            <a href="/contact" class="footerLink">Contact</a>
          </div>
        </div>
      </footer>
    </main>

    <style>
      :global(body){margin:0;color:#fff;font-family:"Source Sans 3", ui-sans-serif, system-ui;background:#141414}
      h1,h2,h3,.heroName,.sectionTitle,.featuredTitle,.footerName{font-family:"Manrope", system-ui}

      /* Filmic background */
      .bg{position:fixed;inset:0;z-index:-1;background:#141414}
      .vignette{
        position:absolute;inset:-40px;
        background:
          radial-gradient(1100px 540px at 20% 10%, rgba(255,215,0,0.05), transparent 55%),
          radial-gradient(900px 500px at 90% 20%, rgba(80,170,255,0.04), transparent 55%),
          radial-gradient(1200px 900px at 50% 70%, rgba(255,255,255,0.02), transparent 60%),
          radial-gradient(ellipse at center, rgba(0,0,0,0) 35%, rgba(0,0,0,0.58) 100%);
      }
      .grain{
        position:absolute;inset:0;
        background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='160' height='160'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='.8' numOctaves='2' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='160' height='160' filter='url(%23n)' opacity='.35'/%3E%3C/svg%3E");
        opacity:.075; mix-blend-mode:overlay; pointer-events:none;
      }

      .wrap{max-width:1120px;margin:54px auto;padding:0 20px}

      /* Hero */
      .heroTop{
        display:flex;justify-content:space-between;align-items:flex-end;gap:18px;
        padding:22px 20px;margin-bottom:18px;
        border:1px solid rgba(255,255,255,0.08);
        border-radius:18px;
        background: linear-gradient(180deg, rgba(20,20,20,0.92), rgba(12,12,12,0.80));
        box-shadow: 0 18px 50px rgba(0,0,0,0.45);
      }
      .heroName{margin:0;font-size:2.6rem;letter-spacing:-0.01em;line-height:1.05;font-weight:700}
      .sub{margin:8px 0 0;color:rgba(255,255,255,0.72)}
      .actions{display:flex;gap:10px;flex-wrap:wrap}
      .btn{
        border:1px solid rgba(255,255,255,0.12);
        padding:10px 14px;border-radius:999px;
        color:#fff;text-decoration:none;background:rgba(18,18,18,0.65);
        transition:transform .18s ease, background .18s ease, border-color .18s ease;
      }
      .btn:hover{transform:translateY(-2px);background:rgba(26,26,26,0.85);border-color:rgba(255,255,255,0.18)}
      .btn.ghost{background:transparent;color:rgba(255,255,255,0.82)}
      .btn.primary{
        position:relative;
        background:linear-gradient(180deg, rgba(255,215,0,0.18), rgba(20,20,20,0.80));
        border-color:rgba(255,215,0,0.26);
        overflow:hidden;
      }
      .btn.primary::after{
        content:"";
        position:absolute;inset:-40%;
        background:linear-gradient(90deg, transparent, rgba(255,215,0,0.22), transparent);
        transform:translateX(-60%) rotate(18deg);
        animation: shimmer 2.9s ease-in-out infinite;
        pointer-events:none;
      }
      @keyframes shimmer{
        0%{transform:translateX(-60%) rotate(18deg)}
        55%{transform:translateX(80%) rotate(18deg)}
        100%{transform:translateX(80%) rotate(18deg)}
      }
      @media (prefers-reduced-motion: reduce){
        .btn.primary::after{animation:none}
      }

      /* Section plates */
      .sectionBlock{
        padding:18px 16px;
        border:1px solid rgba(255,255,255,0.08);
        border-radius:16px;
        background: linear-gradient(180deg, rgba(12,12,12,0.95), rgba(8,8,8,0.85));
        box-shadow: 0 18px 40px rgba(0,0,0,0.38);
      }
      .sectionHead{
        display:flex;align-items:baseline;justify-content:flex-start;gap:12px;
        margin-bottom:12px;position:relative;padding-left:12px;
      }
      .sectionHead::before{
        content:"";position:absolute;left:0;top:2px;bottom:2px;width:3px;border-radius:99px;
        background: linear-gradient(180deg, rgba(255,215,0,0.95), rgba(80,170,255,0.70));
        box-shadow:0 0 18px rgba(255,215,0,0.10);
      }
      .sectionHead.split{justify-content:space-between}
      .sectionTitle{margin:0;font-size:1.25rem;font-weight:700}
      .sectionTitleLarge{font-size:1.55rem}
      .muted{color:#9a9a9a}
      .mutedSmall{color:rgba(255,255,255,0.60);font-size:.95rem}
      .seeAll{color:rgba(255,255,255,0.72);text-decoration:none;border-bottom:1px solid rgba(255,255,255,0.18);padding-bottom:2px}
      .seeAll:hover{color:#fff;border-bottom-color:rgba(255,255,255,0.32)}

      /* Divider */
      .sectionDivider{
        border:0;height:3px;margin:32px 0;border-radius:99px;
        background: linear-gradient(90deg, rgba(20,20,20,0), rgba(255,255,255,0.20), rgba(20,20,20,0));
        box-shadow: 0 0 26px rgba(255,255,255,0.08), 0 0 55px rgba(255,215,0,0.04);
      }

      /* Featured */
      .featuredCard{
        display:grid;grid-template-columns:1.65fr 1fr;gap:16px;
        border:1px solid rgba(255,255,255,0.10);
        border-radius:18px;
        background: linear-gradient(180deg, rgba(16,16,16,0.92), rgba(10,10,10,0.86));
        text-decoration:none;color:inherit;overflow:hidden;
      }
      .thumb{aspect-ratio:16/9;overflow:hidden;background:#111}
      .thumb img{width:100%;height:100%;object-fit:cover;display:block}
      .featuredImg{position:relative}
      .featuredOverlay{
        position:absolute;inset:0;
        background: linear-gradient(180deg, rgba(0,0,0,0.05), rgba(0,0,0,0.55));
        display:flex;align-items:flex-start;justify-content:flex-start;padding:14px;
      }
      .badge{
        display:inline-flex;align-items:center;gap:8px;
        padding:8px 12px;border-radius:999px;
        border:1px solid rgba(255,215,0,0.30);
        background:rgba(0,0,0,0.38);
        color:rgba(255,215,0,0.95);
        font-weight:600;font-size:.9rem;
        backdrop-filter: blur(6px);
      }
      .featuredMeta{padding:16px 16px 18px}
      .featuredKicker{color:rgba(255,255,255,0.72);font-size:.95rem}
      .featuredTitle{margin:10px 0 8px;font-size:1.65rem;letter-spacing:-0.01em;font-weight:700}
      .featuredLogline{margin:10px 0 14px;color:rgba(255,255,255,0.72);line-height:1.7}
      .ctaRow{display:flex;align-items:center;gap:12px;margin-top:10px}
      .watchBtn{
        display:inline-flex;align-items:center;justify-content:center;
        border:1px solid rgba(255,215,0,0.28);
        background: linear-gradient(180deg, rgba(255,215,0,0.16), rgba(16,16,16,0.85));
        padding:10px 14px;border-radius:999px;font-weight:600;
      }
      .featuredBlurb{margin:12px 0 0;color:rgba(255,255,255,0.70);line-height:1.65;font-size:1.02rem}

      /* Grid + cards */
      .grid{display:grid;grid-template-columns:repeat(3,1fr);gap:18px}
      .card{
        border:1px solid rgba(255,255,255,0.10);
        border-radius:16px;
        background: linear-gradient(180deg, rgba(16,16,16,0.92), rgba(10,10,10,0.86));
        text-decoration:none;color:inherit;display:block;overflow:hidden;
      }
      .meta{padding:12px 12px 14px}
      .title{font-weight:600}
      .kicker{margin-top:6px;color:rgba(255,255,255,0.62);font-size:.95rem}
      .awardsStack{margin-top:8px;font-size:.88rem;line-height:1.35}

      /* Hover */
      .cardHover{transition:transform .22s ease, box-shadow .22s ease, border-color .22s ease;will-change:transform}
      .cardHover .thumb img{transition:transform .32s ease;will-change:transform}
      .cardHover:hover{transform:translateY(-4px);box-shadow:0 22px 44px rgba(0,0,0,.55);border-color:rgba(255,255,255,0.16)}
      .cardHover:hover .thumb img{transform:scale(1.04)}
      @media (prefers-reduced-motion: reduce){
        .cardHover, .cardHover .thumb img{transition:none}
      }

      /* Rolodex rows */
      .scrollHint{color:rgba(255,255,255,0.55);font-size:.98rem}
      .rowWrap{position:relative}
      .rowPad{padding:2px 4px 10px}
      .rowStrip{
        display:flex;gap:16px;
        overflow-x:auto;
        scroll-snap-type:x mandatory;
        scroll-behavior:smooth;
        -webkit-overflow-scrolling:touch;
        padding:0;
      }
      .rowCard{flex:0 0 auto;width:262px;scroll-snap-align:start}

      .rowArrow{
        position:absolute;top:50%;transform:translateY(-55%);
        z-index:5;width:44px;height:44px;border-radius:999px;
        border:1px solid rgba(255,255,255,0.14);
        background:rgba(10,10,10,.75);color:#fff;
        font-size:28px;display:flex;align-items:center;justify-content:center;
        cursor:pointer;transition:opacity .18s ease, transform .18s ease, background .18s ease;
        opacity:0;pointer-events:none;backdrop-filter: blur(6px);
      }
      .rowArrow.left{left:8px}
      .rowArrow.right{right:8px}
      .rowWrap.is-scrollable .rowArrow{opacity:.92;pointer-events:auto}
      .rowWrap.at-left .rowArrow.left{opacity:0 !important;pointer-events:none !important}
      .rowWrap.at-right .rowArrow.right{opacity:0 !important;pointer-events:none !important}
      .rowArrow:hover{background:rgba(22,22,22,.88);transform:translateY(-55%) scale(1.04)}

      .edgeGlow{position:absolute;top:0;bottom:0;width:86px;z-index:4;opacity:0;pointer-events:none;transition:opacity .18s ease}
      .edgeGlow.left{left:0}
      .edgeGlow.right{right:0}
      .edgeGlow.left{
        background:
          radial-gradient(ellipse at left, rgba(140,190,255,.14), transparent 60%),
          linear-gradient(to right, rgba(20,20,20,1), rgba(20,20,20,0));
      }
      .edgeGlow.right{
        background:
          radial-gradient(ellipse at right, rgba(255,215,0,.12), transparent 60%),
          linear-gradient(to left, rgba(20,20,20,1), rgba(20,20,20,0));
      }
      .edgeGlow.is-on{opacity:1;animation:glowPulse 1.65s ease-in-out infinite}
      @keyframes glowPulse{0%,100%{filter:blur(0)}50%{filter:blur(1.4px)}}

      /* Browse pills */
      .catRow{display:flex;flex-wrap:wrap;gap:10px}
      .catPill{
        display:inline-flex;align-items:center;gap:10px;
        padding:10px 14px;border-radius:999px;
        border:1px solid rgba(255,255,255,0.10);
        background: linear-gradient(180deg, rgba(18,18,18,.92), rgba(10,10,10,.86));
        color:rgba(255,255,255,0.90);
        text-decoration:none;
        transition: transform .18s ease, border-color .18s ease, background .18s ease;
      }
      .pillDot{width:8px;height:8px;border-radius:99px;background:rgba(255,215,0,0.8);box-shadow:0 0 14px rgba(255,215,0,0.18)}
      .catPill:hover{transform: translateY(-2px);border-color:rgba(255,255,255,0.18);background: linear-gradient(180deg, rgba(24,24,24,.95), rgba(12,12,12,.90))}

      /* Footer */
      .footer{margin:34px 0 20px}
      .footerLine{height:1px;background:linear-gradient(90deg, rgba(20,20,20,0), rgba(255,255,255,0.12), rgba(20,20,20,0));box-shadow:0 0 18px rgba(255,255,255,0.05);margin-bottom:18px}
      .footerInner{display:flex;justify-content:space-between;gap:16px;align-items:flex-end;flex-wrap:wrap}
      .footerName{font-weight:700;font-size:1.05rem}
      .footerSub{color:rgba(255,255,255,0.58);font-size:.98rem;margin-top:4px}
      .footerRight{display:flex;gap:14px;flex-wrap:wrap}
      .footerLink{color:rgba(255,255,255,0.72);text-decoration:none;border-bottom:1px solid rgba(255,255,255,0.16);padding-bottom:2px}
      .footerLink:hover{color:#fff;border-bottom-color:rgba(255,255,255,0.30)}

      @media(max-width:900px){
        .grid{grid-template-columns:repeat(2,1fr)}
        .featuredCard{grid-template-columns:1fr}
        .rowCard{width:250px}
      }
      @media(max-width:600px){
        .grid{grid-template-columns:1fr}
        .heroTop{flex-direction:column;align-items:flex-start}
        .rowCard{width:235px}
        .rowArrow{display:none}
      }
    </style>

    <script>
      function setupRolodexRow(rowWrap) {
        const strip = rowWrap.querySelector("[data-rowstrip]");
        const btnL = rowWrap.querySelector('[data-arrow="left"]');
        const btnR = rowWrap.querySelector('[data-arrow="right"]');
        const glowL = rowWrap.querySelector('[data-glow="left"]');
        const glowR = rowWrap.querySelector('[data-glow="right"]');

        if (!strip) return;

        const update = () => {
          const maxScrollLeft = strip.scrollWidth - strip.clientWidth;
          const canScroll = maxScrollLeft > 4;
          const EPS = 10;

          const atLeft = strip.scrollLeft <= EPS;
          const atRight = strip.scrollLeft >= maxScrollLeft - EPS;

          rowWrap.classList.toggle("is-scrollable", canScroll);
          rowWrap.classList.toggle("at-left", canScroll && atLeft);
          rowWrap.classList.toggle("at-right", canScroll && atRight);

          if (glowL) glowL.classList.toggle("is-on", canScroll && !atLeft);
          if (glowR) glowR.classList.toggle("is-on", canScroll && !atRight);
        };

        const scrollByAmount = (dir) => {
          const amt = Math.max(240, Math.floor(strip.clientWidth * 0.9));
          strip.scrollBy({ left: dir * amt, behavior: "smooth" });
        };

        if (btnL) btnL.addEventListener("click", () => scrollByAmount(-1));
        if (btnR) btnR.addEventListener("click", () => scrollByAmount(1));

        strip.addEventListener("scroll", () => requestAnimationFrame(update));
        window.addEventListener("resize", () => requestAnimationFrame(update));

        requestAnimationFrame(() => {
          strip.scrollLeft = 0;
          update();
        });

        setTimeout(update, 250);
        setTimeout(update, 900);
      }

      document.querySelectorAll("[data-rowwrap]").forEach(setupRolodexRow);
    </script>
  </body>
</html>